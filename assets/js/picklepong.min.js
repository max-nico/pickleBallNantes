function fix_dpi(){let t=+getComputedStyle(canvas).getPropertyValue("height").slice(0,-2),e=+getComputedStyle(canvas).getPropertyValue("width").slice(0,-2);canvas.setAttribute("height",t*dpi),canvas.setAttribute("width",e*dpi)}const canvas=document.getElementById("canvas");let scorep1=document.getElementById("scorep1"),scorep2=document.getElementById("scorep2"),p1=0,p2=0;const FPS=60;let dt=.9,set=!1,dpi=window.devicePixelRatio;fix_dpi();let colors={red:"#EF172F",blue:"#121237",white:"#fff",matBlue:"#17B4EF"},sizes={player:{width:35,height:200},ball:{radius:50}},position={ball:{x:canvas.width/2,y:canvas.height/2}},velocity={player:{vx:250,vy:600},ball:{vx:10,vy:10}};if(canvas.getContext){const t=canvas.getContext("2d");class e{constructor(t,e,i,h,s){this.color=t,this.x=e,this.y=i,this.width=h,this.height=s}draw(){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)}}class i{constructor(t,e,i,h,s){this.image=t,this.x=e,this.y=i,this.width=h,this.height=s}draw(){t.drawImage(this.image,this.x,this.y,this.width,this.height)}}const h=document.getElementById("ball"),s=new i(h,position.ball.x,position.ball.y,sizes.ball.radius,sizes.ball.radius),a=new e(colors.red,0,canvas.height/2-sizes.player.height/2,sizes.player.width,sizes.player.height),l=new e(colors.blue,canvas.width-sizes.player.width,canvas.height/2-sizes.player.height/2,sizes.player.width,sizes.player.height);let y=()=>{s.x=s.x<0?l.x-l.width:a.x+a.width/2,s.y=s.x<0?l.y+l.height/2:a.y+a.height/2,dt=.9,set=!1,set||setTimeout(()=>{l.y=Math.random()*canvas.height},1e3)},c=()=>{s.x<a.x+a.width/2&&s.y>=a.y&&s.y<=a.y+a.height&&(velocity.ball.vx*=-1),s.x>l.x-l.width/2&&s.y>=l.y&&s.y<=l.y+l.height&&(velocity.ball.vx*=-1),(s.y<0||s.y>canvas.height)&&(velocity.ball.vy*=-1),setInterval(()=>{dt+=.01},5e3),dt>3&&(dt=3),s.x-=velocity.ball.vx*dt,s.y-=velocity.ball.vy*dt},n=()=>{let t=1;document.onclick=(t=>{set=!0}),document.onmousemove=(t=>{a.y=t.clientY}),a.y<=0&&(a.y=0),a.y>canvas.height-sizes.player.height&&(a.y=canvas.height-sizes.player.height,t=1*Math.random(),console.log(t)),set&&(l.y=s.y*t*.6),l.y<=0?l.y=0:l.y>canvas.height-sizes.player.height&&(l.y=canvas.height-sizes.player.height),d()},d=()=>{s.x<-40&&(l.win=!0,p2++,y()),s.x>canvas.width+40&&(a.win=!0,p1++,y())},o=()=>{t.clearRect(0,0,canvas.width,canvas.height),s.draw(),a.draw(),l.draw(),scorep1.innerHTML=p1,scorep2.innerHTML=p2,!set&&a.win&&(s.y=a.y+(a.height/2-s.height/2),s.x=a.x+s.width/2+s.width/2),!set&&l.win&&(s.y=l.y+(l.height/2-s.height/2),s.x=l.x+s.width/2-s.width-s.width/2),set&&c()};setInterval(()=>{n(),o()},1e3/FPS)}